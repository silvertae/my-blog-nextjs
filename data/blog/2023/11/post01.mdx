---
title: 'ì›¹í°íŠ¸ ë¡œë”©ì‹œ ì¶œë ì´ëŠ” í˜„ìƒ í•´ê²°í•˜ê¸°'
date: '2023-11-06'
tags: ['Font Optimization', 'FOUT', 'font display', next/font]
draft: false
summary: 'ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ë©´ì„œ ì²˜ìŒ í˜ì´ì§€ ë¡œë“œì‹œ í°íŠ¸ê°€ ì¶œë ì´ëŠ” í˜„ìƒì„ ë°œê²¬í–ˆë‹¤. ì´ë¥¼ ê°œì„ í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì„ ì•Œì•„ë³´ê³  ì§ì ‘ ì ìš©í•´ë³´ì.'
---

## ëª©ì°¨

- [Intro](#intro)
- [ë¬¸ì œ ì›ì¸](#ë¬¸ì œ-ì›ì¸)
  - [FOUT vs FOIT](#fout-vs-foit)
  - [font-display](#font-display)

- [í•´ê²° ë°©ë²•](#í•´ê²°-ë°©ë²•)
  - [ì„œë¸Œì…‹ í°íŠ¸ë¡œ íŒŒì¼ ìš©ëŸ‰ ì¤„ì´ê¸°](#ì„œë¸Œì…‹-í°íŠ¸ë¡œ-íŒŒì¼-ìš©ëŸ‰-ì¤„ì´ê¸°)
  - [ê·¸ ì™¸ í°íŠ¸ ê´€ë ¨ ì†ì„±ë“¤](#í°íŠ¸-ê´€ë ¨-ì†ì„±)

- [ê²°ë¡ ](#ê²°ë¡ )
- [Reference](#reference)

## Intro

![before gif](/static/gifs/font-error-before.gif)

ìœ„ gifë¥¼ ë³´ë©´ ì£¼ì†Œì°½ì— ë¸”ë¡œê·¸ urlì„ ì…ë ¥í•´ì„œ ì²˜ìŒ í˜ì´ì§€ê°€ ë Œë”ë§ ë  ë•Œ í°íŠ¸ê°€ ë³€í•˜ë©´ì„œ ì¶œë ì´ëŠ”ê²Œ ë³´ì¸ë‹¤.
ì™œ ì´ëŸ° í˜„ìƒì´ ë°œìƒí•˜ê³  ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í• ì§€ ì°¾ì•„ë³´ì•˜ë‹¤.

### ì–´ë–¤ ë¬¸ì œê°€ ìˆì—ˆëŠ”ê°€?

ì²˜ìŒ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê³  ë‚˜ì„œ ëª‡ê°€ì§€ ìˆ˜ì •ì„ í•˜ë©´ì„œ ê¸°ì¡´ í…œí”Œë¦¿ì— ì„¤ì •ëœ í°íŠ¸ê°€ ë§ˆìŒì— ì•ˆë“¤ì–´ì„œ ì¢€ ë” ê¹”ë”í•œ í°íŠ¸ë¡œ ë°”ê¾¸ê³  ì‹¶ì—ˆë‹¤.
ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ë•Œ Next.jsì™€ tailwindë¥¼ ì‚¬ìš©í•œ [ë¸”ë¡œê·¸ í…œí”Œë¦¿](https://github.com/timlrx/tailwind-nextjs-starter-blog)ì„ ì‚¬ìš©í–ˆëŠ”ë° í°íŠ¸ ì„¤ì •ì´ ì–´ë–»ê²Œ ë˜ì–´ìˆë‚˜ ì°¾ì•„ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ë˜ì–´ìˆì—ˆë‹¤.

```tsx
// app/layout.tsx
import { Space_Grotesk } from 'next/font/google'

const space_grotesk = Space_Grotesk({
  subsets: ['latin'],
  display: 'swap',
  variable: '--font-space-grotesk',
})
```

Next.jsë¥¼ ì‚¬ìš©í•´ë³´ëŠ”ê²Œ ì²˜ìŒì´ì—ˆê¸° ë•Œë¬¸ì— ê³µì‹ë¬¸ì„œë¥¼ ì°¾ì•„ë³´ë‹ˆ next/font ë¼ëŠ” ìì²´ì ì¸ Font Moduleì„ ê°€ì§€ê³  ìˆì—ˆë‹¤.
ì „ì—ëŠ” `@next/font` ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ ë”°ë¡œ ì„¤ì¹˜í•´ì•¼ ì‚¬ìš©ì´ ê°€ëŠ¥í–ˆëŠ”ë°, Next.js 13.2 ë²„ì „ ì´í›„ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” Built-in next/fontë¥¼ ì´ìš©í•´ì„œ [Font Optimization](https://nextjs.org/docs/app/building-your-application/optimizing/fonts#local-fonts)ì„ ì œê³µí•˜ê³  ìˆì—ˆë‹¤.

ë‚˜ëŠ” ë¸”ë¡œê·¸ì— Google Fontì—ì„œ ì œê³µí•˜ëŠ” í°íŠ¸ê°€ ì•„ë‹Œ ì•„ë‹Œ [Pretendard](https://github.com/orioncactus/pretendard) í°íŠ¸ë¥¼ ì ìš©í•˜ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì—
`public/static/fonts` í´ë”ì— ë¯¸ë¦¬ ë‹¤ìš´ë°›ì€ `PretendardVariable.woff2` íŒŒì¼ì„ ë„£ì–´ë‘ê³  next/fontì—ì„œ ì œê³µí•˜ëŠ” localFont ì„¤ì •ì— ë§ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì • í›„ì— ë‹¤ì‹œ ë¹Œë“œí•´ì„œ ë°°í¬í•˜ì˜€ë‹¤.

```tsx
// app/layout.tsx
import localFont from 'next/font/local'

const pretendard = localFont({
  src: '../public/static/fonts/PretendardVariable.woff2',
  display: 'swap',
  variable: '--font-pretendard',
})
```

ê·¸ë¦¬ê³  ìƒˆë¡­ê²Œ ë°°í¬ëœ ë¸”ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ëŠ”ë° ì´ì „ì— ì—†ì—ˆë˜ í°íŠ¸ê°€ ì¶œë ì´ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” í˜„ìƒì„ ë°œê²¬í–ˆë‹¤.
Pretendard í°íŠ¸ë¥¼ ë‹¤ìš´ë°›ì•„ ì˜¤ëŠ” ë™ì•ˆ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ëœ ë‹¤ë¥¸ í°íŠ¸ë¡œ í‘œì‹œë˜ì—ˆë‹¤ê°€ í°íŠ¸ ìŠ¤íƒ€ì¼ì´ ë°”ë€Œë©´ì„œ í™”ë©´ì— ì¶œë ì´ëŠ” ê²ƒì²˜ëŸ¼ í‘œì‹œë˜ëŠ” ê²ƒ ê°™ì•˜ë‹¤.

## ë¬¸ì œ ì›ì¸

ë¬¸ì œ ì›ì¸ì€ ì¡°ê¸ˆë§Œ ì°¾ì•„ë³´ë‹ˆ ì•Œ ìˆ˜ ìˆì—ˆëŠ”ë° next/fontì— ì˜í•´ ë””í´íŠ¸ë¡œ ì„¤ì •ëœ `font-display: swap` ì†ì„±ê³¼ í•´ë‹¹ í°íŠ¸ë¥¼ ë¡œë“œí•´ì˜¤ëŠ” ì‹œê°„ë•Œë¬¸ì´ì—ˆë‹¤. 

ê·¸ë¦¬ê³  ì•ì—ì„œ ë´¤ë˜ í°íŠ¸ ìŠ¤íƒ€ì¼ì´ ë³€í•˜ë©´ì„œ ì¶œë ì´ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” í˜„ìƒì„ FOUT(Flash Of Unstyled Text)ë¼ê³  ë¶€ë¥¸ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆë‹¤.

### FOUT vs FOIT

ë¸Œë¼ìš°ì €ëŠ” ì›¹í˜ì´ì§€ë¥¼ ë Œë”ë§ í•  ë•Œ ì„¤ì •ëœ ì›¹í°íŠ¸ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ í•´ë‹¹ í…ìŠ¤íŠ¸ì˜ ë Œë”ë§ì„ ì°¨ë‹¨í•˜ëŠ”ë°, ì´ëŸ¬í•œ ë Œë”ë§ ì°¨ë‹¨ ì²˜ë¦¬ ë°©ì‹ì€ ë¸Œë¼ìš°ì €ë§ˆë‹¤ ì°¨ì´ê°€ ìˆë‹¤.

Chromeê³¼ Firefoxì—ì„œëŠ” ìµœëŒ€ 3ì´ˆì˜ timeoutì„ ë‘ê³  í…ìŠ¤íŠ¸ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ì§€ ì•Šë‹¤ê°€ ì›¹í°íŠ¸ ë¡œë”©ì´ ì™„ë£Œë˜ë©´ í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œëœ ì›¹í°íŠ¸ë¡œ ëŒ€ì²´í•˜ëŠ” **FOIT(Flash Of Invisible Text)** ë°©ì‹ìœ¼ë¡œ ë Œë”ë§ì„ ì°¨ë‹¨í•œë‹¤. ë§Œì•½ 3ì´ˆê°€ ì§€ë‚ ë•Œê¹Œì§€ ì›¹í°íŠ¸ê°€ ë¡œë”©ë˜ì§€ ì•Šìœ¼ë©´ ë¸Œë¼ìš°ì € ê¸°ë³¸ ëŒ€ì²´ í°íŠ¸ë¡œ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•œë‹¤. 

Internet Explorer ê³„ì—´ ë¸Œë¼ìš°ì €ëŠ” timeoutì´ 0ì´ˆë¡œ ìš°ì„  ì›¹í°íŠ¸ê°€ ë¡œë”©ë  ë•Œê¹Œì§€ ëŒ€ì²´ í°íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ë³´ì—¬ì£¼ê³  í›„ì— ì›¹í°íŠ¸ê°€ ë¡œë”©ë˜ë©´ í…ìŠ¤íŠ¸ë¥¼ ì›¹í°íŠ¸ë¡œ ì „í™˜í•˜ëŠ” **FOUT(Flash Of Unstyled Text)** ë°©ì‹ìœ¼ë¡œ ë Œë”ë§ ì°¨ë‹¨ì„ ì²˜ë¦¬í•œë‹¤.

(Safari ë¸Œë¼ìš°ì € ì´ëŸ¬í•œ timeoutì´ ì—†ê³  ê¸°ì¤€ ë„¤íŠ¸ì›Œí¬ ì‹œê°„ ì œí•œì„ ì´ˆê³¼í–ˆì„ ë•Œì˜ ë™ì‘ë„ ì—†ë‹¤ê³  í•œë‹¤? ğŸ¤”)

ê²°êµ­ ì›¹í°íŠ¸ë¥¼ ë Œë”ë§í•  ë•Œ í…ìŠ¤íŠ¸ê°€ ë²ˆì©ì´ëŠ” í˜„ìƒ(flash of text)ì´ ì¼ì–´ë‚˜ëŠ”ë°, ì´ê²ƒì´ ì•„ë¬´ê²ƒë„ ë³´ì´ì§€ ì•ŠëŠ” ìƒíƒœì—ì„œ ì›¹í°íŠ¸ê°€ ë‚˜íƒ€ë‚˜ë©° ë²ˆì©ì´ëŠëƒ(FOIT), ëŒ€ì²´ í°íŠ¸ì—ì„œ ì›¹í°íŠ¸ë¡œ ìŠ¤íƒ€ì¼ì´ ë°”ë€Œë©´ì„œ ë²ˆì©ì´ëŠëƒ(FOUT)ì˜ ì°¨ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

ë‚˜ëŠ” í¬ë¡¬ ë¸Œë¼ìš°ì €ë¥¼ ì´ìš©í•˜ê³  ìˆìŒì—ë„ FOITì´ ì•„ë‹Œ FOUT ë°©ì‹ìœ¼ë¡œ ë Œë”ë§ ì°¨ë‹¨ì´ ëœ ê²ƒì¸ë°, ê·¸ ì´ìœ ëŠ” `next/font`ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” `font-display` ì†ì„±ì´ `swap`ìœ¼ë¡œ ì ìš©ë¼ ìˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

### font-display

MDN ì„¤ëª…ì— ë”°ë¥´ë©´ `font-display`ëŠ” font faceê°€ í‘œì‹œë˜ëŠ” ë°©ë²•ì„ ê²°ì •í•˜ëŠ” ì†ì„±ì´ë‹¤. ì¦‰, ë¸Œë¼ìš°ì €ì—ì„œ í°íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ í•´ì˜¤ëŠ” ì‹œê°„ë™ì•ˆ í™”ë©´ìƒì— í…ìŠ¤íŠ¸ë¥¼ ì–´ë–»ê²Œ ë Œë”ë§í• ì§€ ê²°ì •í•˜ëŠ” css ì†ì„±ì´ë‹¤.

font-displayëŠ” í°íŠ¸ ë‹¤ìš´ë¡œë“œì˜ íƒ€ì„ë¼ì¸ì„ í°íŠ¸ ì°¨ë‹¨ ê¸°ê°„(font block period) -> í°íŠ¸ êµì²´ ê¸°ê°„(font swap period) -> í°íŠ¸ ì‹¤íŒ¨ ê¸°ê°„(font failure period) ì„¸ ê°€ì§€ ê¸°ê°„ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.

![font-display](/static/images/font-display.png)

*font-display í•œëˆˆì— ë³´ê¸°(https://www.sertmedia.com/how-does-font-display-work/)*

font-displayì—ëŠ” auto(default), block, swap, fallback, option ì´ë ‡ê²Œ 5ê°€ì§€ ì„¤ì •ì´ ê°€ëŠ¥í•œë°, ì—¬ê¸°ì„œëŠ” block, swap ë‘ ê°€ì§€ ë°©ì‹ì— ëŒ€í•´ì„œë§Œ ê°„ë‹¨íˆ ë¹„êµí•˜ê³  ë„˜ì–´ê°€ê³ ì í•œë‹¤.

ë¨¼ì € blockì€ 

font-display ì†ì„±ì´ swapìœ¼ë¡œ ì„¤ì •ë¼ ìˆìœ¼ë©´ ë¸Œë¼ìš°ì €ê°€ í°íŠ¸ë¥¼ ë‹¤ìš´ë°›ëŠ” ë™ì•ˆ ëŒ€ì²´ í°íŠ¸ë¡œ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•˜ê³  í°íŠ¸ ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ì„¤ì •í•œ í°íŠ¸ë¡œ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•´ì¤€ë‹¤.

## í•´ê²° ë°©ë²•

### ì„œë¸Œì…‹ í°íŠ¸ë¡œ íŒŒì¼ ìš©ëŸ‰ ì¤„ì´ê¸°

![before subset](/static/images/before-subset.png)

![after subset](/static/images/after-subset.png)

### ëŒ€ì²´ í°íŠ¸ì™€ ìŠ¤íƒ€ì¼ ì°¨ì´ ì¤„ì´ê¸°

font style matcher

### `preload` ì†ì„± í™œìš©í•˜ê¸°

## ê²°ë¡ 

- í°íŠ¸ê°€ ì¶œë ì´ë˜ í˜„ìƒì€ FOUTì— ì˜í•œ ê²ƒ
- ë¶ˆí•„ìš”í•œ Glyphë¥¼ ì¤„ì¸ subset í°íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í°íŠ¸ ë¡œë”© ì‹œê°„ì„ ì¤„ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.

---

## Reference

[How @next/font works](https://blog.mathpresso.com/how-next-font-works-8bb72c2bae39)

https://d2.naver.com/helloworld/4969726

https://developer.chrome.com/blog/font-display

[ì§€ì—° ì‹œê°„ ì—†ì´ ì›¹í°íŠ¸ ì„œë¹™í•˜ê¸° - Feat. Safari & Edge functions | ë±…í¬ìƒëŸ¬ë“œ](https://blog.banksalad.com/tech/font-preload-on-safari/)

